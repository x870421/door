"use strict";(self["webpackChunkh990"]=self["webpackChunkh990"]||[]).push([[314],{6314:function(t,e,a){a.r(e),a.d(e,{default:function(){return v}});var s=a(3396),i=a(7139);const d={class:"p-sm-4 p-2"},l={key:0,class:"ps-2"};function o(t,e,a,o,n,u){const m=(0,s.up)("a-table-column"),r=(0,s.up)("edit-outlined"),c=(0,s.up)("a-button"),h=(0,s.up)("a-table"),f=(0,s.up)("a-spin"),p=(0,s.up)("dutystatusModal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",d,[(0,s.Wm)(f,{spinning:n.spinning,tip:"Loading..."},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{class:"mt-2",size:"small","data-source":n.dutyData,pagination:{size:"middle","show-quick-jumper":!0,defaultPageSize:20,position:["bottomLeft"],pageSizeOptions:["10","20","30","40"]}},{bodyCell:(0,s.w5)((({column:e,record:a})=>[e&&"shift_code"===e.key?((0,s.wg)(),(0,s.iD)("span",l,(0,i.zw)(a.shift_code),1)):e&&"action"===e.key?((0,s.wg)(),(0,s.j4)(c,{key:1,title:t.$t("modify"),type:"text",onClick:t=>u.showModal(!1,a)},{icon:(0,s.w5)((()=>[(0,s.Wm)(r)])),_:2},1032,["title","onClick"])):(0,s.kq)("",!0)])),default:(0,s.w5)((()=>[(0,s.Wm)(m,{class:"ps-4 text-nowrap table-bg-primary",key:"shift_code",title:t.$t("shiftCode"),"data-index":"shift_code"},null,8,["title"]),(0,s.Wm)(m,{class:"text-nowrap table-bg-primary",key:"shiftname",title:t.$t("dutyShift"),"data-index":"shiftname"},null,8,["title"]),(0,s.Wm)(m,{class:"table-bg-primary",key:"time_start ",title:t.$t("startTime"),"data-index":"time_start",sorter:u.sorterDate},null,8,["title","sorter"]),(0,s.Wm)(m,{class:"table-bg-primary",key:"action",title:t.$t("action"),"data-index":"action"},null,8,["title"])])),_:1},8,["data-source"])])),_:1},8,["spinning"])]),(0,s.Wm)(p,{onUpdateDutystatus:u.updateDutystatus,ref:"dutyEditModel",modal:n.modal,setmodal:n.setmodal},null,8,["onUpdateDutystatus","modal","setmodal"])],64)}var n=a(3318);const u={class:"container"},m={class:"row justify-content-between"};function r(t,e,a,d,l,o){const n=(0,s.up)("a-button"),r=(0,s.up)("a-input"),c=(0,s.up)("a-form-item"),h=(0,s.up)("a-time-picker"),f=(0,s.up)("a-form"),p=(0,s.up)("a-modal");return(0,s.wg)(),(0,s.j4)(p,{visible:l.showModal.visible,"onUpdate:visible":e[4]||(e[4]=t=>l.showModal.visible=t),width:"500px",title:(l.showModal.isNew?t.$t("add"):t.$t("modify"))+t.$t("information")},{footer:(0,s.w5)((()=>[(0,s.Wm)(n,{key:"back",onClick:e[0]||(e[0]=t=>l.showModal.visible=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.$t("cancel")),1)])),_:1}),(0,s.Wm)(n,{key:"submit",type:"primary",onClick:o.onCheck,loading:l.setModal.loading},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t.$t("submit")),1)])),_:1},8,["onClick","loading"])])),default:(0,s.w5)((()=>[(0,s.Wm)(f,(0,s.dG)({autocomplete:"off",ref:"dutystatusFormRef",name:"duty-status-modal",model:l.dutystatus},{labelCol:{span:5},wrapperCol:{span:24}}),{default:(0,s.w5)((()=>[(0,s._)("div",u,[(0,s._)("div",m,[(0,s.Wm)(c,{label:t.$t("shiftCode"),name:"shift_code",rules:[{required:!0,message:t.$t("shiftCodeFeedBack")}]},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{disabled:"",placeholder:t.$t("shiftCodeFeedBack"),value:l.dutystatus.shift_code,"onUpdate:value":e[1]||(e[1]=t=>l.dutystatus.shift_code=t)},null,8,["placeholder","value"])])),_:1},8,["label","rules"]),(0,s.Wm)(c,{label:t.$t("dutyShift"),name:"shiftname"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{placeholder:t.$t("shiftCodeFeedBack"),value:l.dutystatus.shiftname,"onUpdate:value":e[2]||(e[2]=t=>l.dutystatus.shiftname=t)},null,8,["placeholder","value"])])),_:1},8,["label"]),(0,s.Wm)(c,{label:t.$t("startTime"),name:"time_start",rules:[{required:!0,message:t.$t("startTimeFeedBack")}]},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{"value-format":"HH:mm",value:l.dutystatus.time_start,"onUpdate:value":e[3]||(e[3]=t=>l.dutystatus.time_start=t),format:"HH:mm",placeholder:"HH:mm",onSelect:o.changeDuration},null,8,["value","onSelect"])])),_:1},8,["label","rules"])])])])),_:1},16,["model"])])),_:1},8,["visible","title"])}var c=a(5743),h=a.n(c),f={props:["modal","setmodal"],data(){return{showModal:{},dutystatus:{},shift:[{name:"上班",code:"1"},{name:"下班",code:"2"},{name:"外出",code:"3"},{name:"歸回",code:"4"},{name:"加班開始",code:"5"},{name:"加班結束",code:"6"}],setModal:{}}},watch:{modal:{handler(){this.showModal=this.modal,this.dutystatus={...this.showModal.temp}},deep:!0},setmodal:{handler(){this.setModal=this.setmodal},deep:!0,immediate:!0}},methods:{changeDuration(t){this.dutystatus.time_start=h()(t).format("HH:mm"),this.$refs.dutystatusFormRef.validateFields(["time_start"])},changeName(t){const e=this.shift.find((e=>e.code===t));this.dutystatus.shiftname=e.name},onCheck(){this.$refs.dutystatusFormRef.validateFields().then((()=>{this.$emit("update-dutystatus",this.dutystatus,this.showModal.isNew)})).catch((()=>{this.$refs.dutystatusFormRef.scrollToField()}))}},created(){}},p=a(89);const y=(0,p.Z)(f,[["render",r]]);var w=y,_=a(2074),b={components:{EditOutlined:n.Z,dutystatusModal:w},data(){return{dutyData:[{id:1,index:1,shift_code:"1",shiftname:"上班",time_start:"08:00"},{id:2,index:2,shift_code:"2",shiftname:"下班",time_start:"18:00"},{id:3,index:3,shift_code:"3",shiftname:"外出",time_start:"14:00"},{id:4,index:4,shift_code:"4",shiftname:"返回",time_start:"16:00"},{id:5,index:5,shift_code:"5",shiftname:"加班開始",time_start:"19:00"},{id:6,index:6,shift_code:"6",shiftname:"加班結束",time_start:"22:00"}],spinning:!1,search:"",setmodal:{loading:!1},modal:{visible:!1,temp:{},isNew:!1}}},methods:{sorterDate(t,e){return h()(t.time_start,"HH:mm")-h()(e.time_start,"HH:mm")},updateDutystatus(t){this.setmodal.loading=!0;const e=this.$t("update");this.dutyData[t.id-1]=t,_.ZP.success(e+this.$t("success"),5),this.setmodal.loading=!1,this.modal.visible=!1},showModal(t,e){this.$refs.dutyEditModel.$refs.dutystatusFormRef&&this.$refs.dutyEditModel.$refs.dutystatusFormRef.clearValidate(),this.modal.visible=!0,this.modal.isNew=t,this.modal.temp=t?{}:e,this.setmodal.loading=!1}},created(){}};const k=(0,p.Z)(b,[["render",o]]);var v=k}}]);