"use strict";(self["webpackChunkh990"]=self["webpackChunkh990"]||[]).push([[46],{9046:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var i=a(3396),l=a(9242),s=a(7139);const n={class:"p-sm-4 p-2"},o={class:"d-flex justify-content-between"},d={key:0,class:"ps-3"},r={key:1},m={key:2};function u(e,t,a,u,c,h){const p=(0,i.up)("a-button"),w=(0,i.up)("a-table-column"),f=(0,i.up)("a-tag"),v=(0,i.up)("edit-outlined"),g=(0,i.up)("delete-outlined"),T=(0,i.up)("a-table"),$=(0,i.up)("a-spin"),k=(0,i.up)("SirenEditModal"),b=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",n,[(0,i._)("div",o,[(0,i.Wm)(p,{title:e.$t("add"),type:"primary",onClick:t[0]||(t[0]=(0,l.iM)((e=>h.showModal(!0)),["prevent"]))},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.$t("add")),1)])),_:1},8,["title"])]),(0,i.Wm)($,{spinning:c.spinning,tip:"Loading..."},{default:(0,i.w5)((()=>[(0,i.Wm)(T,{"data-source":c.renderData,class:"mt-2",size:"small","row-key":e=>e.id,pagination:{size:"middle","show-quick-jumper":!0,defaultPageSize:5,"show-size-changer":!0,position:["bottomLeft"],pageSizeOptions:["5","10","15","20"]}},{bodyCell:(0,i.w5)((({column:t,record:a,index:n})=>[t&&"actionTime"===t.key?((0,i.wg)(),(0,i.iD)("span",d,(0,s.zw)(h.dayjs(a.actionTime,"HHmm").format("HH:mm")),1)):t&&"duration"===t.key?((0,i.wg)(),(0,i.iD)("span",r,(0,s.zw)(h.dayjs(a.duration,"mmss").format("mm:ss")),1)):t&&"tags"===t.key?((0,i.wg)(),(0,i.iD)("span",m,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.tags,(t=>((0,i.wg)(),(0,i.j4)(f,{title:e.$t(t),key:t,color:"geekblue",class:"mb-1 mt-1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.$t(t)),1)])),_:2},1032,["title"])))),128))])):t&&"action"===t.key?((0,i.wg)(),(0,i.iD)(i.HY,{key:3},[(0,i.Wm)(p,{title:e.$t("modify"),type:"text",onClick:(0,l.iM)((e=>h.showModal(!1,a,n)),["prevent"])},{icon:(0,i.w5)((()=>[(0,i.Wm)(v)])),_:2},1032,["title","onClick"]),(0,i.Wm)(p,{title:e.$t("delete"),type:"text",onClick:e=>h.deleteModal(a,n)},{icon:(0,i.w5)((()=>[(0,i.Wm)(g)])),_:2},1032,["title","onClick"])],64)):(0,i.kq)("",!0)])),default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"ps-4 text-nowrap table-bg-primary",key:"actionTime",title:e.$t("actionTime"),"data-index":"actionTime",width:"10%",sorter:(e,t)=>h.dayjs(e.actionTime,"HHmm")-h.dayjs(t.actionTime,"HHmm")},null,8,["title","sorter"]),(0,i.Wm)(w,{class:"text-nowrap table-bg-primary",key:"duration",title:e.$t("duration"),"data-index":"duration",width:"10%"},null,8,["title"]),(0,i.Wm)(w,{class:"table-bg-primary",key:"tags",title:e.$t("turnOn"),"data-index":"tags",filters:[{text:e.$t("MON"),value:"MON"},{text:e.$t("TUE"),value:"TUE"},{text:e.$t("WED"),value:"WED"},{text:e.$t("THU"),value:"THU"},{text:e.$t("FRI"),value:"FRI"},{text:e.$t("SAT"),value:"SAT"},{text:e.$t("SUN"),value:"SUN"}],onFilter:(e,t)=>1===t[e]},null,8,["title","filters","onFilter"]),(0,i.Wm)(w,{class:"table-bg-primary",key:"action",title:e.$t("action"),"data-index":"action"},null,8,["title"])])),_:1},8,["data-source","row-key"])])),_:1},8,["spinning"])]),(0,i.Wm)(k,{onUpdateTime:h.updateTime,ref:"sirenEditModal",modal:c.modal,option:c.option},null,8,["onUpdateTime","modal","option"]),(0,i.Wm)(b)],64)}a(7658);var c=a(3318),h=a(681),p=a(2574);const w={class:"container"},f={class:"row justify-content-between"};function v(e,t,a,l,n,o){const d=(0,i.up)("a-button"),r=(0,i.up)("a-time-picker"),m=(0,i.up)("a-form-item"),u=(0,i.up)("a-select-option"),c=(0,i.up)("a-select"),h=(0,i.up)("a-form"),p=(0,i.up)("a-modal");return(0,i.wg)(),(0,i.j4)(p,{visible:n.showModal.visible,"onUpdate:visible":t[6]||(t[6]=e=>n.showModal.visible=e),width:"500px",title:(n.showModal.isNew?e.$t("add"):e.$t("modify"))+e.$t("information")},{footer:(0,i.w5)((()=>[(0,i.Wm)(d,{key:"back",onClick:t[0]||(t[0]=e=>n.showModal.visible=!1)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.$t("cancel")),1)])),_:1}),(0,i.Wm)(d,{key:"submit",type:"primary",onClick:o.onCheck},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.$t("submit")),1)])),_:1},8,["onClick"])])),default:(0,i.w5)((()=>[(0,i.Wm)(h,(0,i.dG)({autocomplete:"off",ref:"sirenFormRef",name:"siren-time-modal",model:n.sirenTime},{labelCol:{span:5},wrapperCol:{span:24}}),{default:(0,i.w5)((()=>[(0,i._)("div",w,[(0,i._)("div",f,[(0,i.Wm)(m,{label:e.$t("actionTime"),name:"actionTime",rules:[{required:!0,message:e.$t("actionTimeFeedback")}],help:"HHmm"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{"value-format":"HHmm",value:n.sirenTime.actionTime,"onUpdate:value":t[1]||(t[1]=e=>n.sirenTime.actionTime=e),format:"HH:mm",placeholder:"HH:mm",onSelect:t[2]||(t[2]=e=>o.changeDuration(e,"actionTime","HH:mm"))},null,8,["value"])])),_:1},8,["label","rules"]),(0,i.Wm)(m,{label:e.$t("duration"),name:"duration",rules:[{required:!0,message:e.$t("durationFeedback")}],help:"mmss"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{"value-format":"mmss",value:n.sirenTime.duration,"onUpdate:value":t[3]||(t[3]=e=>n.sirenTime.duration=e),ref:"duration",format:"mm:ss",placeholder:"mm:ss",showNow:!1,onSelect:t[4]||(t[4]=e=>o.changeDuration(e,"duration","mm:ss"))},null,8,["value"])])),_:1},8,["label","rules"]),(0,i.Wm)(m,{label:e.$t("turnOn"),name:"tags",rules:[{required:!0,message:e.$t("turnOnFeedback")}]},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{value:n.sirenTime.tags,"onUpdate:value":t[5]||(t[5]=e=>n.sirenTime.tags=e),mode:"multiple",style:{width:"100%"},onChange:o.handleChange,placeholder:e.$t("turnOnFeedback"),filterOption:!1},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.option,(t=>((0,i.wg)(),(0,i.j4)(u,{key:t.value,value:t.value},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.$t(t.value)),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","onChange","placeholder"])])),_:1},8,["label","rules"])])])])),_:1},16,["model"])])),_:1},8,["visible","title"])}var g=a(5743),T=a.n(g),$={props:["modal","option"],data(){return{showModal:{},sirenTime:{duration:"",actionTime:""}}},watch:{modal:{handler(){this.showModal=this.modal,this.sirenTime={...this.showModal.temp}},deep:!0}},methods:{changeDuration(e,t,a){this.sirenTime[t]=T()(e).format(a),this.$refs.sirenFormRef.validateFields([t])},handleChange(e){this.option.forEach((t=>{this.sirenTime[t.value]=e.includes(t.value)?1:0}))},onCheck(){this.$refs.sirenFormRef.validateFields().then((()=>{this.$emit("update-time",this.sirenTime,this.showModal.isNew,this.showModal.index)})).catch((()=>{this.$refs.sirenFormRef.scrollToField()}))}}},k=a(89);const b=(0,k.Z)($,[["render",v]]);var y=b,W=a(3495),H=a(2074),M={components:{SirenEditModal:y,EditOutlined:c.Z,DeleteOutlined:h.Z},data(){return{option:[{value:"MON"},{value:"TUE"},{value:"WED"},{value:"THU"},{value:"FRI"},{value:"SAT"},{value:"SUN"}],spinning:!1,modal:{visible:!1,temp:{},isNew:!1,index:null},search:"",data:[{FRI:1,MON:0,SAT:1,SUN:1,THU:1,TUE:1,WED:1,actionTime:"0220",duration:"3000",id:1},{FRI:0,MON:1,SAT:1,SUN:1,THU:1,TUE:0,WED:0,actionTime:"0230",duration:"0000",id:2}],renderData:[]}},methods:{dayjs:T(),sorterDate(e,t){},alldataChange(){this.search="",this.handleChange()},handleChange(e){this.search?this.renderData=this.data.filter((t=>t[e])):this.renderData=this.data},deleteModal(e,t){W.Z.confirm({title:this.$t("wannaDelete"),icon:(0,i.Wm)(p.Z),okText:this.$t("confirm"),cancelText:this.$t("cancel"),content:()=>(0,i.h)("div",{},[(0,i.h)("strong",this.$t("deleteItem")),(0,i.h)("div",{class:"py-1"},this.$t("actionTime")+`：${e.actionTime}`),(0,i.h)("div",this.$t("duration")+`：${e.duration}`)]),onOk:()=>{this.data.splice(t,1),this.renderData=JSON.parse(JSON.stringify(this.data)),H.ZP.success(this.$t("belltime")+this.$t("delete")+this.$t("success"),5)},onCancel(){}})},createTag(){this.data.forEach((e=>{e.tags=[],this.option.forEach((t=>{1===e[t.value]&&e.tags.push(t.value)}))}))},showModal(e,t,a){this.data.length>30?alert(this.t("max30")):(this.$refs.sirenEditModal.$refs.sirenFormRef&&this.$refs.sirenEditModal.$refs.sirenFormRef.clearValidate(),this.modal.visible=!0,this.modal.isNew=e,this.modal.index=a,this.modal.temp=e?{}:t)},updateTime(e,t,a){const i={...e};delete i.id,delete i.tags;const l=t?this.$t("added"):this.$t("update");t?this.data.push(i):this.data[a]=i,H.ZP.success(this.$t("belltime")+l+this.$t("success"),5),this.modal.visible=!1,this.createTag(),this.renderData=JSON.parse(JSON.stringify(this.data))}},mounted(){},created(){this.createTag(),this.renderData=JSON.parse(JSON.stringify(this.data))}};const U=(0,k.Z)(M,[["render",u]]);var D=U}}]);