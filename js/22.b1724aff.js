"use strict";(self["webpackChunkh990"]=self["webpackChunkh990"]||[]).push([[22],{22:function(e,a,t){t.r(a),t.d(a,{default:function(){return G}});var i=t(3396),s=t(7139);const l={class:"p-sm-4 p-2"},r={class:"d-flex flex-wrap justify-content-between"},o=["title","href"],n={key:1},d={key:2};function c(e,a,t,c,m,p){const u=(0,i.up)("a-button"),h=(0,i.up)("router-link"),_=(0,i.up)("a-input-search"),f=(0,i.up)("a-table-column"),w=(0,i.up)("edit-outlined"),v=(0,i.up)("delete-outlined"),y=(0,i.up)("a-table"),g=(0,i.up)("a-spin"),k=(0,i.up)("EditModal"),b=(0,i.up)("UploadModal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",l,[(0,i._)("div",r,[(0,i._)("div",null,[(0,i.Wm)(u,{class:"me-2 mb-2",title:e.$t("add"),type:"primary",onClick:a[0]||(a[0]=e=>p.showModal(!0))},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.$t("add")),1)])),_:1},8,["title"]),(0,i.Wm)(u,{class:"me-2 mb-2",title:e.$t("add"),type:"primary",onClick:p.deleteAll},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.$t("delete")),1)])),_:1},8,["title","onClick"]),(0,i.Wm)(u,{class:"me-2 mb-2",onClick:p.exportCSV,title:e.$t("exportCSV"),type:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.$t("exportCSV")),1)])),_:1},8,["onClick","title"]),(0,i.Wm)(h,{to:"/home/person/importCSV"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"me-2 mb-2",title:e.$t("importCSV"),type:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.$t("importCSV")),1)])),_:1},8,["title"])])),_:1})]),(0,i.Wm)(_,{value:m.search,"onUpdate:value":a[1]||(a[1]=e=>m.search=e),placeholder:e.$t("searchText"),style:{width:"200px"},onSearch:p.onSearch},null,8,["value","placeholder","onSearch"])]),(0,i.Wm)(g,{spinning:m.spinning,tip:"Loading..."},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{class:"mt-2",size:"small","row-selection":{selectedRowKeys:m.selectedRowKeys,onChange:p.onSelectChange},"row-key":e=>e.id,"data-source":m.renderData,pagination:{size:"middle","show-quick-jumper":!0,defaultPageSize:20,position:["bottomLeft"],pageSizeOptions:["10","20","30","40"]}},{bodyCell:(0,i.w5)((({column:a,record:t,index:l})=>[a&&"email"===a.key?((0,i.wg)(),(0,i.iD)("a",{key:0,title:t.email,href:`mailto:${t.email}`},(0,s.zw)(t.email),9,o)):a&&"created_since"===a.key?((0,i.wg)(),(0,i.iD)("span",n,(0,s.zw)(p.dayjs(t.created_since).format(m.dateFormat)||""),1)):a&&"valid_till"===a.key?((0,i.wg)(),(0,i.iD)("span",d,(0,s.zw)(p.dayjs(t.valid_till).format(m.dateFormat)||""),1)):a&&"action"===a.key?((0,i.wg)(),(0,i.iD)(i.HY,{key:3},[(0,i.Wm)(u,{title:e.$t("modify"),type:"text",onClick:e=>p.showModal(!1,t,l)},{icon:(0,i.w5)((()=>[(0,i.Wm)(w)])),_:2},1032,["title","onClick"]),(0,i.Wm)(u,{title:e.$t("Delete"),type:"text",onClick:e=>p.deleteModal(t,l)},{icon:(0,i.w5)((()=>[(0,i.Wm)(v)])),_:2},1032,["title","onClick"])],64)):(0,i.kq)("",!0)])),default:(0,i.w5)((()=>[(0,i.Wm)(f,{class:"text-nowrap",key:"username",title:e.$t("name"),"data-index":"username"},null,8,["title"]),(0,i.Wm)(f,{key:"person_id ",title:e.$t("personID"),"data-index":"person_id",ellipsis:!0},null,8,["title"]),(0,i.Wm)(f,{key:"card_id",title:e.$t("cardID"),"data-index":"card_id",ellipsis:!0,responsive:["lg"]},null,8,["title"]),(0,i.Wm)(f,{key:"email",ellipsis:!0,title:e.$t("email"),"data-index":"email"},null,8,["title"]),(0,i.Wm)(f,{ellipsis:!0,key:"created_since",title:e.$t("startTime"),"data-index":"created_since",responsive:["lg"],sorter:(e,a)=>p.dayjs(e.created_since,"YYYY/MM/DD")-p.dayjs(a.created_since,"YYYY/MM/DD")},null,8,["title","sorter"]),(0,i.Wm)(f,{ellipsis:!0,responsive:["md"],key:"valid_till",title:e.$t("endTime"),"data-index":"valid_till",sorter:(e,a)=>p.dayjs(e.valid_till,"YYYY/MM/DD")-p.dayjs(a.valid_till,"YYYY/MM/DD")},null,8,["title","sorter"]),(0,i.Wm)(f,{width:"90px",key:"action",title:e.$t("action"),"data-index":"action"},null,8,["title"])])),_:1},8,["row-selection","row-key","data-source"])])),_:1},8,["spinning"])]),(0,i.Wm)(k,{ref:"editModel","person-data":m.personData,onUpdatePerson:p.updatePerson,modal:m.modal,setmodal:m.setmodal,temp:m.temp},null,8,["person-data","onUpdatePerson","modal","setmodal","temp"]),(0,i.Wm)(b,{onUploadPerson:p.uploadPerson,ref:"UploadModal",modalupload:m.modalupload},null,8,["onUploadPerson","modalupload"])],64)}t(7658);var m=t(3318),p=t(681),u=t(2574),h=t(9242);const _={class:"container"},f={class:"row justify-content-between"},w={class:"col-11 col-md-8"},v={style:{"margin-left":"-0.5rem"},class:"pb-1 fw-semibold"},y={style:{"font-weight":"bold"}},g={style:{"margin-left":"-0.5rem"},class:"pb-1 fw-semibold"},k={class:"col-10 col-md-4"},b=["src"],D={key:1},$=(0,i._)("div",{class:"ant-upload-text"},"Upload",-1);function M(e,a,t,l,r,o){const n=(0,i.up)("a-button"),d=(0,i.up)("a-input"),c=(0,i.up)("a-form-item"),m=(0,i.up)("a-auto-complete"),p=(0,i.up)("a-range-picker"),u=(0,i.up)("LockOutlined"),M=(0,i.up)("a-input-password"),W=(0,i.up)("plus-outlined"),C=(0,i.up)("a-upload"),T=(0,i.up)("a-form"),S=(0,i.up)("a-modal");return(0,i.wg)(),(0,i.j4)(S,{style:{top:"30px"},visible:r.showModal.visible,"onUpdate:visible":a[11]||(a[11]=e=>r.showModal.visible=e),bodyStyle:{"max-height":"625px",overflow:"auto"},width:"650px",title:(r.showModal.isNew?e.$t("add"):e.$t("modify"))+e.$t("information")},{footer:(0,i.w5)((()=>[(0,i.Wm)(n,{key:"back",onClick:a[0]||(a[0]=a=>{r.showModal.visible=!1,e.imageUrl=""})},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.$t("cancel")),1)])),_:1}),(0,i.Wm)(n,{key:"submit",onClick:o.onCheck,type:"primary",loading:r.setModal.loading},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.$t("submit")),1)])),_:1},8,["onClick","loading"])])),default:(0,i.w5)((()=>[(0,i.Wm)(T,(0,i.dG)({autocomplete:"off",ref:"formRef",model:r.person,name:"nest-messages"},{labelCol:{span:6},wrapperCol:{span:30}}),{default:(0,i.w5)((()=>[(0,i._)("div",_,[(0,i._)("div",f,[(0,i._)("div",w,[(0,i._)("div",v,(0,s.zw)(e.$t("basicInformation")),1),(0,i.Wm)(c,{label:e.$t("name"),name:"username",rules:[{required:!0,message:e.$t("nameFeedBack")}]},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{value:r.person.username,"onUpdate:value":a[1]||(a[1]=e=>r.person.username=e),placeholder:e.$t("nameFeedBack")},null,8,["value","placeholder"])])),_:1},8,["label","rules"]),(0,i.Wm)(c,{rules:[{required:!0,validator:o.personID,trigger:"blur"}],label:e.$t("personID"),name:"person_id"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{placeholder:e.$t("personIDFeedBack"),value:r.person.person_id,"onUpdate:value":a[2]||(a[2]=e=>r.person.person_id=e)},null,8,["placeholder","value"])])),_:1},8,["rules","label"]),(0,i.Wm)(c,{class:"me-1",label:e.$t("cardID"),name:"card_id",rules:[{required:!0,validator:o.validateCardID,trigger:"blur"}]},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"w-100",value:r.person.card_id,"onUpdate:value":a[4]||(a[4]=e=>r.person.card_id=e),placeholder:e.$t("cardIDFeedBack"),disabled:r.editCardNumber,autocomplete:"off"},{addonAfter:(0,i.w5)((()=>[(0,i._)("a",{class:"bg-white",href:"#",onClick:a[3]||(a[3]=(0,h.iM)((e=>r.editCardNumber=!r.editCardNumber),["prevent"])),type:"primary"},(0,s.zw)(e.$t("modify")),1)])),_:1},8,["value","placeholder","disabled"])])),_:1},8,["label","rules"]),(0,i.Wm)(c,{name:"email",label:e.$t("email"),rules:[{type:"email",message:e.$t("invalidEmail")},{required:!0,message:e.$t("emailFeedBack")}]},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{value:r.person.email,"onUpdate:value":a[5]||(a[5]=e=>r.person.email=e),placeholder:e.$t("emailFeedBack"),options:r.options,onSearch:o.handleSearch},{option:(0,i.w5)((({value:e})=>[(0,i.Uk)((0,s.zw)(e.split("@")[0])+" @ ",1),(0,i._)("span",y,(0,s.zw)(e.split("@")[1]),1)])),_:1},8,["value","placeholder","options","onSearch"])])),_:1},8,["label","rules"]),(0,i.Wm)(c,{rules:[{required:!0,message:e.$t("startAndEndTimeFeedBack")}],name:"range-picker",label:e.$t("startAndEndTime")},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{class:"w-100",value:r.person["range-picker"],"onUpdate:value":a[6]||(a[6]=e=>r.person["range-picker"]=e),"value-format":"YYYY-MM-DD",ranges:r.ranges,format:r.dateFormat},null,8,["value","ranges","format"])])),_:1},8,["rules","label"]),(0,i._)("div",g,(0,s.zw)(e.$t("passwordSetting")),1),(0,i.Wm)(c,{label:e.$t("password"),name:"password",rules:[{validator:o.validatePass,trigger:"change"}]},{default:(0,i.w5)((()=>[r.setModal.showPassword?((0,i.wg)(),(0,i.j4)(M,{key:1,value:r.person.password,"onUpdate:value":a[8]||(a[8]=e=>r.person.password=e),placeholder:e.$t("passwordFeedBack"),autocomplete:"new-password"},{prefix:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"site-form-item-icon"})])),_:1},8,["value","placeholder"])):((0,i.wg)(),(0,i.iD)("a",{key:0,href:"#",onClick:a[7]||(a[7]=(0,h.iM)((e=>r.setModal.showPassword=!0),["prevent"]))},(0,s.zw)(e.$t("changePassword")),1))])),_:1},8,["label","rules"]),r.setModal.showPassword?((0,i.wg)(),(0,i.j4)(c,{key:0,label:e.$t("confirmPassword"),name:"checkPass",rules:[{validator:o.validatePass2,trigger:"change"}]},{default:(0,i.w5)((()=>[(0,i.Wm)(M,{autocomplete:"off",value:r.person.checkPass,"onUpdate:value":a[9]||(a[9]=e=>r.person.checkPass=e),placeholder:e.$t("confirmPasswordFeedBack")},{prefix:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"site-form-item-icon"})])),_:1},8,["value","placeholder"])])),_:1},8,["label","rules"])):(0,i.kq)("",!0)]),(0,i._)("div",k,[(0,i.Wm)(C,{"file-list":r.fileList,"onUpdate:file-list":a[10]||(a[10]=e=>r.fileList=e),name:"avatar","list-type":"picture-card",class:"avatar-uploader ms-4 d-flex justify-content-center","show-upload-list":!1,"before-upload":o.beforeUpload,customRequest:o.handleUpload},{default:(0,i.w5)((()=>[r.person.imageUrl?((0,i.wg)(),(0,i.iD)("img",{key:0,src:r.person.imageUrl,alt:"avatar"},null,8,b)):((0,i.wg)(),(0,i.iD)("div",D,[(0,i.Wm)(W),$]))])),_:1},8,["file-list","before-upload","customRequest"])])])])])),_:1},16,["model"])])),_:1},8,["visible","title"])}var W=t(5743),C=t.n(W),T=(t(5874),{icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"}),S=T,Y=t(9388);function O(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(a){P(e,a,t[a])}))}return e}function P(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var U=function(e,a){var t=O({},e,a.attrs);return(0,i.Wm)(Y.Z,O({},t,{icon:S}),null)};U.displayName="LockOutlined",U.inheritAttrs=!1;var x=U,z=t(7081),F=t(2074),N={components:{LockOutlined:x,PlusOutlined:z.Z},props:["modal","setmodal","temp","personData"],data(){return{fileList:[],editCardNumber:!1,dateFormat:"YYYY/MM/DD",showModal:{},setModal:{},person:{},options:[],cardData:[{name:this.$t("一般卡"),type:"81"},{name:this.$t("黑名單發警報"),type:"03"},{name:this.$t("黑名單不發警報"),type:"05"},{name:this.$t("不受Anti管制卡"),type:"88"}],ranges:{}}},watch:{temp:{handler(){this.showModal=this.modal,this.person={...this.temp},this.person.created_since&&this.person.valid_till&&(this.person["range-picker"]=[C()(this.person.created_since,this.dateFormat),C()(this.person.valid_till,this.dateFormat)]),this.editCardNumber=!this.showModal.isNew},deep:!0,immediate:!0},modal:{handler(){this.showModal=this.modal,this.editCardNumber=!this.showModal.isNew},deep:!0,immediate:!0},setmodal:{handler(e){this.setModal=this.setmodal},deep:!0,immediate:!0},"$i18n.locale":{handler(e){switch(e){case"en":this.ranges={"This Week":[C()().startOf("week"),C()().endOf("week")],"This Month":[C()().startOf("month"),C()().endOf("month")],"This Year":[C()().startOf("year"),C()().endOf("year")]};break;case"zh-TW":this.ranges={"當周":[C()().startOf("week"),C()().endOf("week")],"當月":[C()().startOf("month"),C()().endOf("month")],"當年":[C()().startOf("year"),C()().endOf("year")]};break}},immediate:!0}},methods:{getBase64(e,a){const t=new FileReader;t.addEventListener("load",(()=>{a(t.result)})),t.readAsDataURL(e)},handleUpload(e){this.getBase64(e.file,(e=>{this.person.imageUrl=e}))},beforeUpload(e){const a="image/jpeg"===e.type||"image/png"===e.type;a||F.ZP.error("You can only upload JPG file!");const t=e.size/1024/1024<2;return t||F.ZP.error("Image must smaller than 2MB!"),a&&t},async validateCardID(e,a,t){return new Promise(((e,t)=>{if(!a)return t(this.$t("cardIDFeedBack"));if(a===this.temp.card_id)return e();for(let i=0;i<this.personData.length;i++)if(this.personData[i].card_id===a)return t(this.$t("cardIDRepeat"));return e()}))},async personID(e,a,t){return new Promise(((e,t)=>{if(!a)return t(this.$t("personIDFeedBack"));if(a===this.temp.person_id)return e();for(let i=0;i<this.personData.length;i++)if(this.personData[i].person_id===a)return t(this.$t("personIDRepeat"));return e()}))},async validatePass(e,a,t){return this.$refs.formRef.validateFields("checkPass"),Promise.resolve()},async validatePass2(e,a,t){return a&&a!==this.person.password?Promise.reject(this.$t("passwordNotMatch")):Promise.resolve()},onCheck(){this.$refs.formRef.validateFields().then((()=>{this.$emit("update-person",this.person,this.showModal.isNew,this.showModal.index)})).catch((()=>{this.$refs.formRef.scrollToField()}))},handleChange(e){e&&(this.person.created_since=C()(e[0]).format("YYYY-MM-DD"),this.person.valid_till=C()(e[1]).format("YYYY-MM-DD"))},handleSearch(e){let a;a=!e||e.indexOf("@")>=0?[]:["gmail.com","yahoo.com.tw","hotmail.com","msn.com","facebook.com"].map((a=>({value:`${e}@${a}`}))),this.options=a}}},j=t(89);const R=(0,j.Z)(N,[["render",M]]);var I=R;const B=(0,i.Uk)(" Upload CSV "),J=(0,i.Uk)("範例下載"),Z={class:"mt-3 mb-1"};function E(e,a,t,l,r,o){const n=(0,i.up)("a-button"),d=(0,i.up)("a-upload"),c=(0,i.up)("a-typography-text"),m=(0,i.up)("a-typography-paragraph"),p=(0,i.up)("a-descriptions-item"),u=(0,i.up)("a-descriptions"),h=(0,i.up)("a-modal");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(h,{visible:r.showModal.visible,"onUpdate:visible":a[1]||(a[1]=e=>r.showModal.visible=e),title:e.$t("importCSV")},{footer:(0,i.w5)((()=>[(0,i.Wm)(n,{key:"submit",type:"primary",onClick:a[0]||(a[0]=e=>r.showModal.visible=!1)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.$t("cancel")),1)])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(d,{disabled:r.loading,showUploadList:!1,name:"file",customRequest:o.readFile},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{loading:r.loading},{default:(0,i.w5)((()=>[B])),_:1},8,["loading"]),(0,i.Uk)(" "+(0,s.zw)(r.name?r.name:e.$t("noFileSelected")),1)])),_:1},8,["disabled","customRequest"]),(0,i._)("span",null,[(0,i.Wm)(n,{onClick:o.exampleCSV,type:"link"},{default:(0,i.w5)((()=>[J])),_:1},8,["onClick"])]),(0,i._)("div",Z,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i._)("ul",null,[(0,i._)("li",null,[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(this.$t("uploadList1")),1)])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(this.$t("uploadList2")),1)])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(this.$t("uploadList3")),1)])),_:1})])])])),_:1})]),(0,i.Wm)(u,{column:{xs:1,sm:1,md:1},bordered:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.cardData,(a=>((0,i.wg)(),(0,i.j4)(p,{key:a,label:e.$t(a.name)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(a.type),1)])),_:2},1032,["label"])))),128))])),_:1})])),_:1},8,["visible","title"])])}var A={props:["modalupload"],data(){return{showModal:{},name:"",loading:!1,cardData:[{name:"一般卡",type:"81"},{name:"黑名單發警報",type:"03"},{name:"黑名單不發警報",type:"05"},{name:"不受Anti管制卡",type:"88"}]}},watch:{modalupload:{handler(e){this.showModal=this.modalupload},deep:!0,immediate:!0}},methods:{exampleCSV(){const e=["person_id,username,email,card_type,card_id,password_hash,authentication_type,created_since,valid_till","7275065026,秦哲瑋,Christopher_Jones76540d@tp.gov.tw,88,57836545052426,,0,2023-01-06,2072-12-24","5590422543,楊雅筑,Rebecca_Mckinney50654d@acer.com,81,41863570849595,,0,2023-01-06,2072-12-24","9268567396,張哲瑋,Robert_Compton74589sd71@hotmail.com,81,4866540015871,,0,2023-01-06,2072-12-24"],a=e.join("\r\n"),t=document.createElement("a"),i=encodeURIComponent(a);t.href="data:application/csv;charset=utf-8,%EF%BB%BF"+i,t.setAttribute("download","example.csv"),t.setAttribute("hidden",!0),t.click()},readFile(e){const a=this,t=e.file;if("text/csv"!==t.type)return void F.ZP.error("請選擇csv檔");a.loading=!0,a.name=e.file.name;const i=new FileReader;i.readAsText(t),i.onload=function(){const e=i.result.replaceAll("\r\n","\n").replace(/\n[\n]+/g,"\n").replace(/\n$/,""),t=e.split("\n");let s=[];const l=[];t.forEach(((e,a)=>{if(0===a)s=e.split(",");else{const a={};for(let t=0;t<s.length;t++){const i=e.split(",");a[s[t]]=i[t]}l.push(a)}})),a.$emit("upload-person",l),a.loading=!1}}}};const V=(0,j.Z)(A,[["render",E]]);var L=V,q=t(3495),H={components:{UploadModal:L,EditModal:I,EditOutlined:m.Z,DeleteOutlined:p.Z},data(){return{spinning:!1,modal:{visible:!1,temp:{},isNew:!1},temp:{},modalupload:{visible:!1},setmodal:{loading:!1,showPassword:!1},personData:[{card_id:"3482219403839",created_since:"2023-01-04T00:00:00.000001",email:"Chloe_Gibson31135@msi.com.tw",id:1,person_id:"987979874",username:"莫詩婷",valid_till:"2072-12-22T23:59:59.999999"},{card_id:"6971156457878",created_since:"2023-01-04T00:00:00",email:"Emily_Heath78606@facebook.com",id:2,person_id:"2328031936623",username:"龍俊賢",valid_till:"2072-12-22T00:00:00"},{card_id:"2879334732127",created_since:"2022-01-01T00:00:00.000001",email:"JamesPorter150@yahoo.com.tw",id:3,person_id:"3800121499740",username:"李婉婷",valid_till:"2022-12-26T23:59:59.999999"},{authentication_type:0,card_id:"8155781733851",created_since:"2023-01-04T00:00:00",email:"Michael_Garrison12788@msi.com.tw",id:4,person_id:"2679200263218",username:"彭依婷",valid_till:"2072-12-22T00:00:00"},{card_id:"8812071689433",created_since:"2023-01-04T00:00:00",email:"Evelyn_Schwartz85561@hotmail.com",id:5,person_id:"288954875558",username:"麻佳玲",valid_till:"2072-12-22T00:00:00"},{card_id:"7244418131601",created_since:"2023-01-04T00:00:00",email:"Kimberly_Johnson28473@ebay.com",id:6,person_id:"3932495178544",username:"蘇瑋婷",valid_till:"2072-12-22T00:00:00"},{card_id:"1537420604093",created_since:"2023-01-04T00:00:00",email:"Eddie_Randall39236@facebook.com",id:7,person_id:"4902559747619",username:"吳俊賢",valid_till:"2072-12-22T00:00:00"},{card_id:"9285949599513",created_since:"2023-01-04T00:00:00",email:"Daniel_Ross87121@ebay.com",id:8,person_id:"6923762985689",username:"王雅婷",valid_till:"2072-12-22T00:00:00"},{card_id:"7119878478651",created_since:"2023-01-04T00:00:00",email:"Gregory_Norton40595@aol.com",id:9,person_id:"1563977615770",username:"張佳蓉",valid_till:"2072-12-22T00:00:00"},{card_id:"2838939917452",created_since:"2023-01-04T00:00:00",email:"William_Reese21783@msn.com",id:10,person_id:"5145942108898",username:"胡惠如",valid_till:"2072-12-22T00:00:00"},{card_id:"8417546116546",created_since:"2023-01-04T00:00:00",email:"Jerry_Pena40218@asus.com",id:11,person_id:"2056581770779",username:"謝懿",valid_till:"2072-12-22T00:00:00"},{card_id:"8674404358986",created_since:"2023-01-04T00:00:00",email:"Dwayne_Mcintosh21591@asus.com",id:12,person_id:"5874787495435",username:"丁威廷",valid_till:"2072-12-22T00:00:00"},{card_id:"6319424685668",created_since:"2023-01-04T00:00:00",email:"Ann_Clements65511@gmail.com",id:13,person_id:"6038176637274",username:"李傑克",valid_till:"2072-12-22T00:00:00"},{card_id:"2613163937311",created_since:"2023-01-04T00:00:00",email:"Brenda_Williams23659@esunbank.com.tw",id:14,person_id:"2585209295023",username:"蔡佳樺",valid_till:"2072-12-22T00:00:00"},{card_id:"5020514549449",created_since:"2023-01-04T00:00:00",email:"Sheri_Watkins24@yahoo.com.tw",id:15,person_id:"7601017767455",username:"寇雅玲",valid_till:"2072-12-22T00:00:00"},{card_id:"6001592172896",created_since:"2023-01-04T00:00:00",email:"John_Hart88528@msn.com",id:16,person_id:"2859315791176",username:"申柏翰",valid_till:"2072-12-22T00:00:00"},{card_id:"7862800771343",created_since:"2023-01-04T00:00:00",email:"Brandon_Warren29349@aol.com",id:17,person_id:"3776387722336",username:"王怡安",valid_till:"2072-12-22T00:00:00"},{card_id:"8883579417903",created_since:"2023-01-04T00:00:00",email:"Zachary_Ballard82334@aol.com",id:18,person_id:"5689582101487",username:"王中山",valid_till:"2072-12-22T00:00:00"},{card_id:"4438484497638",created_since:"2023-01-04T00:00:00",email:"Austin_Parrish12271@msi.com.tw",id:19,person_id:"3857624033405",username:"黃佳慧",valid_till:"2072-12-22T00:00:00"},{card_id:"8065823075804",created_since:"2023-01-04T00:00:00",email:"Danielle_Smith52503@ebay.com",id:20,person_id:"0749271919085",username:"胡羽",valid_till:"2072-12-22T00:00:00"}],renderData:[],search:"",dateFormat:"YYYY-MM-DD",selectedRowKeys:[]}},methods:{dayjs:C(),onSelectChange(e){this.selectedRowKeys=e},onSearch(){this.renderData=this.personData.filter((e=>e.person_id.match(this.search)||e.username.match(this.search)||e.card_id.match(this.search)||e.email.match(this.search)))},deleteAll(){q.Z.confirm({title:this.$t("wannaDelete"),icon:(0,i.Wm)(u.Z),okText:this.$t("confirm"),cancelText:this.$t("cancel"),onOk:()=>{this.personData=this.personData.filter((e=>!this.selectedRowKeys.includes(e.person_id))),this.renderData=JSON.parse(JSON.stringify(this.personData)),F.ZP.success(this.$t("delete")+this.$t("success"),10),sessionStorage.setItem("person",JSON.stringify(this.personData))},onCancel(){}})},deleteModal(e,a){q.Z.confirm({title:this.$t("wannaDelete"),icon:(0,i.Wm)(u.Z),okText:this.$t("confirm"),cancelText:this.$t("cancel"),content:()=>(0,i.h)("div",{},[(0,i.h)("strong",this.$t("deleteItem")),(0,i.h)("div",{class:"py-1"},this.$t("name")+`：${e.username}`),(0,i.h)("div",this.$t("cardID")+`：${e.card_id}`)]),onOk:()=>{this.personData.splice(a,1),this.renderData=JSON.parse(JSON.stringify(this.personData)),sessionStorage.setItem("person",JSON.stringify(this.personData)),F.ZP.success(this.$t("delete")+this.$t("success"),10)},onCancel(){}})},showModal(e,a,t){this.$refs.editModel.$refs.formRef&&this.$refs.editModel.$refs.formRef.clearValidate(),this.setmodal.loading=!1,this.modal.visible=!0,this.modal.isNew=e,this.modal.index=t,this.temp=e?{password:"",email:"",authentication_type:1}:a,this.setmodal.showPassword=e},updatePerson(e,a,t){const i={...e};i["range-picker"]&&(i.created_since=C()(i["range-picker"][0]).format("YYYY-MM-DD"),i.valid_till=C()(i["range-picker"][1]).format("YYYY-MM-DD")),delete i["range-picker"],i.password_hash||delete i.password_hash,delete i.password,delete i.checkPass;const s=a?this.$t("added"):this.$t("update");this.setmodal.loading=!0,console.log(i),a?this.personData.push(i):this.personData[t]=i,this.renderData=JSON.parse(JSON.stringify(this.personData)),sessionStorage.setItem("person",JSON.stringify(this.personData)),F.ZP.success(i.username+" "+s+this.$t("success"),10),this.setmodal.loading=!1,this.modal.visible=!1},exportCSV(){let e=[];const a=[];this.personData.forEach(((t,i)=>{0===i&&(e=Object.keys(t),a.push(e.join(",")));const s=[];e.forEach((e=>{s.push(t[e])})),a.push(s.join(","))}));const t=a.join("\r\n"),i=document.createElement("a"),s=encodeURIComponent(t);i.href="data:application/csv;charset=utf-8,%EF%BB%BF"+s,i.setAttribute("download","data.csv"),i.setAttribute("hidden",!0),i.click()},uploadPerson(e){this.personData=this.personData.concat(e),this.renderData=JSON.parse(JSON.stringify(this.personData)),F.ZP.success("匯入成功")},getData(){const e=sessionStorage.getItem("person");e?this.renderData=JSON.parse(e):(sessionStorage.setItem("person",JSON.stringify(this.personData)),this.renderData=JSON.parse(JSON.stringify(this.personData)))}},created(){this.getData()}};const K=(0,j.Z)(H,[["render",c]]);var G=K}}]);