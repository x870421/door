"use strict";(self["webpackChunkh990"]=self["webpackChunkh990"]||[]).push([[284],{1570:function(e,t,a){a.d(t,{Z:function(){return h}});var i=a(3396),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1a110.96 110.96 0 00-79.1-32.8zm412.3 235.5l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9a32.03 32.03 0 009.3-35.2l-.9-2.6a442.5 442.5 0 00-79.6-137.7l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52-9.4-106.8-9.4-158.8 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.3a353.44 353.44 0 00-98.9 57.3l-81.8-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a445.93 445.93 0 00-79.6 137.7l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3a32.05 32.05 0 0025.8 25.7l2.7.5a448.27 448.27 0 00158.8 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l.9-2.6c4.3-12.4.6-26.3-9.5-35zm-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"}}]},name:"setting",theme:"filled"},s=l,n=a(9388);function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){d(e,t,a[t])}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=function(e,t){var a=o({},e,t.attrs);return(0,i.Wm)(n.Z,o({},a,{icon:s}),null)};c.displayName="SettingFilled",c.inheritAttrs=!1;var h=c},9284:function(e,t,a){a.r(t),a.d(t,{default:function(){return G}});var i=a(3396),l=a(7139),s=a(9242);const n={class:"d-flex"},o={class:"vh-100 time-bar-group"},d={class:"ps-3 time-title py-2 border-bottom border-end"},c={class:"time-menu-height"},h={class:"time-menu border-end bg-white"},r=["onClick"],m={class:"time-group"},u={class:"ps-3 d-flex align-items-center time-title py-2 border-bottom w-100"},y={class:"py-3 px-4"},p={class:"position-relative"},w={key:0,class:"position-absolute text-white d-flex align-items-center justify-content-center",style:{top:"0",bottom:"0",left:"0",right:"0","background-color":"rgba(0, 0, 0, 0.55)","z-index":"100"}},D={class:"d-flex align-items-center holiday-table-width"},g={class:"ms-3 year-table-width"},f={class:"text-center fw-bold fs-6 lh-1 text-primary"},k=(0,i._)("div",{style:{"max-width":"730px"}},null,-1),v={class:"container-fluid"},_={key:0,class:"row"},b={key:1,class:"ms-3 year-table-width"},$={class:"text-center fw-bold fs-6 lh-1 text-primary"},M={class:"container-fluid"},x={key:0,class:"row"},Y={class:"my-2 d-flex justify-content-center holiday-table-width"};function C(e,t,a,C,O,W){const F=(0,i.up)("a-menu-item"),K=(0,i.up)("a-menu"),N=(0,i.up)("setting-filled"),z=(0,i.up)("edit-outlined"),P=(0,i.up)("a-menu-divider"),S=(0,i.up)("delete-outlined"),j=(0,i.up)("a-dropdown"),U=(0,i.up)("left-outlined"),T=(0,i.up)("a-button"),Z=(0,i.up)("Month"),q=(0,i.up)("right-outlined"),R=(0,i.up)("a-input"),I=(0,i.up)("a-form-item"),H=(0,i.up)("a-form"),A=(0,i.up)("a-modal");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",n,[(0,i._)("div",o,[(0,i._)("div",d,(0,l.zw)(e.$t("holidayGroup")),1),(0,i._)("div",c,[(0,i._)("div",h,[(0,i.Wm)(K,{class:"border-end-0",selectedKeys:O.selectedKeys,"onUpdate:selectedKeys":t[1]||(t[1]=e=>O.selectedKeys=e),mode:"inline"},{default:(0,i.w5)((()=>[(0,i.Wm)(F,{key:"add"},{default:(0,i.w5)((()=>[(0,i._)("a",{href:"#",onClick:t[0]||(t[0]=(0,s.iM)((e=>W.changeTemp("add")),["prevent"]))},(0,l.zw)(e.$t("add")),1)])),_:1}),O.holidayData&&O.holidayData.length>0?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(O.holidayData,((e,t)=>((0,i.wg)(),(0,i.j4)(F,{key:e.holiday_name},{default:(0,i.w5)((()=>[(0,i._)("a",{href:"#",onClick:(0,s.iM)((a=>W.changeTemp(e,t)),["prevent"])},(0,l.zw)(e.holiday_name),9,r)])),_:2},1024)))),128)):(0,i.kq)("",!0)])),_:1},8,["selectedKeys"])])])]),(0,i._)("div",m,[(0,i._)("div",u,[(0,i._)("span",null,(0,l.zw)(O.selectName),1),O.temp&&O.temp.holiday_name?((0,i.wg)(),(0,i.j4)(j,{key:0,trigger:["click"],class:"ms-2"},{overlay:(0,i.w5)((()=>[(0,i.Wm)(K,null,{default:(0,i.w5)((()=>[(0,i.Wm)(F,null,{default:(0,i.w5)((()=>[(0,i.Wm)(z,{class:"me-1"}),(0,i._)("a",{onClick:t[3]||(t[3]=(0,s.iM)((e=>O.visible=!0),["prevent"]))},(0,l.zw)(e.$t("修改假日表名稱")),1)])),_:1}),(0,i.Wm)(P),(0,i.Wm)(F,null,{default:(0,i.w5)((()=>[(0,i.Wm)(S,{class:"me-1",style:{color:"red"}}),(0,i._)("a",{onClick:t[4]||(t[4]=(0,s.iM)(((...e)=>W.deleteHoliday&&W.deleteHoliday(...e)),["prevent"])),style:{color:"red"}},(0,l.zw)(e.$t("刪除此假日表")),1)])),_:1})])),_:1})])),default:(0,i.w5)((()=>[(0,i._)("a",{class:"ant-dropdown-link setting-link",onClick:t[2]||(t[2]=(0,s.iM)((()=>{}),["prevent"]))},[(0,i.Wm)(N)])])),_:1})):(0,i.kq)("",!0)]),(0,i._)("div",y,[(0,i._)("div",p,[O.temp.holiday_name||O.visible?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",w,(0,l.zw)(e.$t("請先點選左側新增")),1)),(0,i.Uk)(" "+(0,l.zw)(e.$t("holidayTable"))+": ",1),(0,i._)("div",{class:(0,l.C_)({"px-2 py-1":(new Date).getMonth()<9})},[(0,i._)("div",D,[(new Date).getMonth()+1>=11?((0,i.wg)(),(0,i.j4)(T,{key:0,style:{width:"25px"},type:"link",onClick:t[5]||(t[5]=e=>O.currentPage=1),disabled:1===O.currentPage,title:2===O.currentPage?this.$t("goto")+" "+(new Date).getFullYear()+" "+this.$t("year"):""},{default:(0,i.w5)((()=>[(0,i.Wm)(U)])),_:1},8,["disabled","title"])):(0,i.kq)("",!0),(0,i.wy)((0,i._)("div",g,[(0,i._)("div",f,(0,l.zw)((new Date).getFullYear()),1),k,(0,i._)("div",v,[O.temp&&O.temp.holiday_date?((0,i.wg)(),(0,i.iD)("div",_,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(12,(e=>(0,i._)("div",{class:"col-6 col-sm-4 col-md-3 col-month-width g-2",key:e},[(0,i.Wm)(Z,{month:e,year:(new Date).getFullYear(),onAddDate:W.addDate,onReduceDate:W.reduceDate,select:O.temp.holiday_date},null,8,["month","year","onAddDate","onReduceDate","select"])]))),64))])):(0,i.kq)("",!0)])],512),[[s.F8,1===O.currentPage]]),(new Date).getMonth()+1>=11?(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",b,[(0,i._)("div",$,(0,l.zw)((new Date).getFullYear()+1),1),(0,i._)("div",M,[O.temp&&O.temp.holiday_date?((0,i.wg)(),(0,i.iD)("div",x,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(12,(e=>(0,i._)("div",{class:"col-6 col-sm-4 col-md-3 col-month-width g-2",key:e},[(0,i.Wm)(Z,{month:e,year:(new Date).getFullYear()+1,onAddDate:W.addDate,onReduceDate:W.reduceDate,select:O.temp.holiday_date},null,8,["month","year","onAddDate","onReduceDate","select"])]))),64))])):(0,i.kq)("",!0)])],512)),[[s.F8,2===O.currentPage]]):(0,i.kq)("",!0),(new Date).getMonth()+1>=11?((0,i.wg)(),(0,i.j4)(T,{key:2,style:{width:"25px"},type:"link",onClick:t[6]||(t[6]=e=>O.currentPage=2),disabled:2===O.currentPage,title:1===O.currentPage?this.$t("goto")+" "+((new Date).getFullYear()+1)+" "+this.$t("year"):""},{default:(0,i.w5)((()=>[(0,i.Wm)(q)])),_:1},8,["disabled","title"])):(0,i.kq)("",!0)])],2),(0,i._)("div",Y,[O.temp&&O.temp.holiday_name?((0,i.wg)(),(0,i.j4)(T,{key:0,type:"primary",onClick:(0,s.iM)(W.saveData,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.$t("save")),1)])),_:1},8,["onClick"])):(0,i.kq)("",!0)])])])])]),(0,i.Wm)(A,{visible:O.visible,"onUpdate:visible":t[8]||(t[8]=e=>O.visible=e),title:e.$t("holidayTableFeedBack"),"ok-text":e.$t("save"),"cancel-text":e.$t("cancel"),onOk:W.onOk,onCancel:W.onCancel},{default:(0,i.w5)((()=>[(0,i.Wm)(H,{model:O.temp,ref:"holidayFormRef"},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{style:{"max-width":"350px"},class:"mb-2",label:e.$t("shiftname"),rules:[{required:!0,validator:W.validate,trigger:"change"}],name:"holiday_name"},{default:(0,i.w5)((()=>[(0,i.Wm)(R,{onKeyup:(0,s.D2)(W.onOk,["enter"]),value:O.temp.holiday_name,"onUpdate:value":t[7]||(t[7]=e=>O.temp.holiday_name=e)},null,8,["onKeyup","value"])])),_:1},8,["label","rules"])])),_:1},8,["model"])])),_:1},8,["visible","title","ok-text","cancel-text","onOk","onCancel"])])}a(7658),a(1703);var O=a(5743),W=a.n(O);const F={colspan:"7",class:"text-center"},K={class:"text-center"},N=["onClick","title"],z=["onMousedown","onMouseover"];function P(e,t,a,n,o,d){return(0,i.wg)(),(0,i.iD)("div",{class:"month-table-width",onKeyup:t[2]||(t[2]=(...t)=>e.keyupSelect&&e.keyupSelect(...t))},[(0,i._)("table",{class:"h-100 month-picker w-100 border border-primary bg-",onMouseup:t[0]||(t[0]=(...e)=>d.mouseUp&&d.mouseUp(...e)),onMouseleave:t[1]||(t[1]=(0,s.iM)(((...e)=>d.mouseUp&&d.mouseUp(...e)),["stop"]))},[(0,i._)("thead",null,[(0,i._)("th",F,(0,l.zw)(e.$t(o.monthList[a.month-1])),1)]),(0,i._)("tbody",null,[(0,i._)("tr",K,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.weeks,((t,a)=>((0,i.wg)(),(0,i.iD)("th",{key:t,onClick:e=>d.selectWeek(a,e),class:(0,l.C_)({select:d.filter(a)}),title:"點擊選取 "+e.$t(`${t.toUpperCase()}`)},(0,l.zw)(e.$t(t)),11,N)))),128))]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.days,((e,t)=>((0,i.wg)(),(0,i.iD)("tr",{key:"day"+t},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e,((e,t)=>((0,i.wg)(),(0,i.iD)("td",{onMousedown:t=>d.mouseDown(e,t),onMouseover:t=>d.dragDay(e,t),class:(0,l.C_)([{select:a.select.includes(`${a.year}-${a.month<10?`0${a.month}`:a.month}-${e}`)},{empty:!e}]),key:t},(0,l.zw)(parseInt(e)?parseInt(e):""),43,z)))),128))])))),128))])],32)],32)}var S={data(){return{weeks:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthList:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:[],isMouseDown:!1,1:[],2:[],3:[],4:[],5:[],6:[],0:[]}},props:["month","select","year"],methods:{filter(e){let t=!0;return this[e].every((e=>this.select.includes(e)?t:(t=!1,!1))),t},selectWeek(e,t){this[e].forEach((e=>{const a=W()(e).format("DD");this.toggleSelect(a,t)}))},toggleSelect(e,t){const a=this.month<10?`0${this.month}`:this.month,i=t.target.className;switch(i){case"empty":break;case"select":this.$emit("reduceDate",`${this.year}-${a}-${e}`);break;case"":this.$emit("addDate",`${this.year}-${a}-${e}`);break}},countDay(e,t){const a=new Date(e,t,0).getDate();let i=[];for(let l=1;l<=a;l++){const s=W()(new Date(e,t-1,l));0===s.day()&&1!==l&&(this.days.push(i),i=[]),this[s.day()].push(s.format("YYYY-MM-DD")),i[s.day()]=s.format("DD"),l===a&&(this.days.push(i),i=[],this.days.length<=5&&this.days.push([]))}},mouseDown(e,t){this.toggleSelect(e,t),this.isMouseDown=!0},dragDay(e,t){this.isMouseDown&&this.toggleSelect(e,t)},mouseUp(){this.isMouseDown=!1}},created(){this.countDay(this.year,this.month)}},j=a(89);const U=(0,j.Z)(S,[["render",P]]);var T=U,Z=a(2074),q=a(3495),R=a(681),I=a(3318),H=a(1127),A=a(4312),J=a(1570),E=a(2574),L={components:{Month:T,DeleteOutlined:R.Z,EditOutlined:I.Z,LeftOutlined:H.Z,RightOutlined:A.Z,SettingFilled:J.Z},data(){return{currentPage:1,selectedKeys:[],temp:{holiday_name:" "},holidayData:[{holiday_date:["2023-01-02","2023-01-20","2023-01-23","2023-01-24","2023-01-25","2023-01-26","2023-01-27","2023-04-03","2023-04-04","2023-04-05"],holiday_id:"1",holiday_name:"年休假",id:1}],isNew:!1,selectName:"",selectIndex:0,clickDay:"",visible:!1}},methods:{onCancel(){if(0===this.holidayData.length)return this.temp={holiday_date:[]},this.selectIndex=0,void(this.selectedKeys=[]);this.selectedKeys=[this.holidayData[0].holiday_name],this.changeTemp(this.holidayData[0],0)},onOk(){this.$refs.holidayFormRef.validateFields().then((()=>{this.visible=!1,this.selectName=this.temp.holiday_name,"add"!==this.selectedKeys[0]&&this.saveData()})).catch((()=>{this.$refs.holidayFormRef.scrollToField()}))},addDate(e){this.clickDay=e;const t=JSON.parse(JSON.stringify(this.temp.holiday_date));t.push(e),this.temp.holiday_date=t},reduceDate(e){this.clickDay=e,this.temp.holiday_date=this.temp.holiday_date.filter((t=>t!==e))},async validate(e,t,a){if(!t)return Promise.reject(this.$t("requiredFeedback"));const i=this.holidayData.find((e=>this.isNew?e.holiday_name===t:e.holiday_name===t&&t!==this.holidayData[this.selectIndex].holiday_name));return i?Promise.reject(new Error(this.$t("nameRepeat"))):Promise.resolve()},changeTemp(e,t){this.clickDay="","add"===e&&(this.visible=!0,this.$refs.holidayFormRef&&this.$refs.holidayFormRef.clearValidate()),this.temp="add"===e?{holiday_name:"New Template",holiday_date:[]}:JSON.parse(JSON.stringify(e)),this.selectIndex="add"===e?"":t,this.isNew="add"===e,this.selectName=e.holiday_name},saveData(){this.temp.holiday_date=[...new Set(this.temp.holiday_date)];const e={...this.temp},t=this.isNew?"added":"update";this.isNew?this.holidayData.push(e):this.holidayData[this.selectIndex]=e,this.getData(),Z.ZP.success(this.temp.holiday_name+" "+this.$t(t)+this.$t("success"),5),this.selectedKeys=[e.holiday_name]},keyUp(e){if(!this.clickDay)return;const t=e.keyCode;let a="";switch(t){case 37:a=W()(this.clickDay).subtract(1,"day").format("YYYY-MM-DD");break;case 38:a=W()(this.clickDay).subtract(7,"day").format("YYYY-MM-DD");break;case 39:a=W()(this.clickDay).add(1,"day").format("YYYY-MM-DD");break;case 40:a=W()(this.clickDay).add(7,"day").format("YYYY-MM-DD");break;default:return}W()(a).month()===W()(this.clickDay).month()&&(this.temp.holiday_date.includes(a)?this.reduceDate(a):this.addDate(a))},getData(e){if(0===this.holidayData.length)return this.temp={holiday_date:[]},this.selectName="",void(this.selectIndex=0);if(e&&(this.selectedKeys=[this.holidayData[0].holiday_name],this.changeTemp(this.holidayData[0],0)),this.isNew){const e=this.holidayData.length-1;this.changeTemp(this.holidayData[e],e),this.isNew=!1}},deleteHoliday(){"add"!==this.selectedKeys[0]?q.Z.confirm({title:this.$t("wannaDelete"),icon:(0,i.Wm)(E.Z),okText:this.$t("confirm"),cancelText:this.$t("cancel"),content:()=>(0,i.h)("div",{},[(0,i.h)("strong",this.$t("deleteItem")),(0,i.h)("div",{class:"py-1"},this.$t("holidayGroup")+`：${this.temp.holiday_name}`)]),onOk:()=>{this.holidayData.splice(this.selectIndex,1),Z.ZP.success(this.temp.holiday_name+" "+this.$t("delete")+this.$t("success"),5),this.getData("first")},onCancel(){}}):this.onCancel()}},mounted(){this.getData("first"),addEventListener("keyup",this.keyUp,!1)},beforeUnmount(){removeEventListener("keyup",this.keyUp)}};const B=(0,j.Z)(L,[["render",C]]);var G=B}}]);